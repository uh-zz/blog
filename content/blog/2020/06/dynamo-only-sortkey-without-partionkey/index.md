---
title: "DynamoDBのソートキーだけで絞り込みたいとき"
date: "2020-06-05T08:12:03.284Z"
description: "DynamoDBのソートキーだけで絞り込みたいとき"
tags: ["DynamoDB", "aws"]
---

Dynamo のテーブルに GSI(グローバルセカンダリインデックス)を貼って
ハッシュキー＋ソートキーでクエリするパターンが通常の使い方かと思います。

ではソートキーを日付にしていた場合、同じ日付範囲のデータを一括で
取得できる方法はありますでしょうか。。

公式ドキュメントにはその辺の Tips がありませんでした(\*私調べ)が、
以下の記事を教えてもらいました。

[DynamoDB の設計力をあげたい][dynamodbの設計力をあげたい]

これの設計２を参考にさせてもらいました。

全データ共通のダミー列を用意して、以下の GSI を作成します。

- パーティションキーはダミー列
- ソートキーに日付

これで同じ日付範囲の複数データを引っ張ってくることが可能になります。

確かに美しいと言えないかもしれませんが、機転の効いた方法だと思いました。

もっといい方法あればまた記事書きます。

[dynamodbの設計力をあげたい]: https://www.ketancho.net/entry/2018/01/30/075500#%E8%A8%AD%E8%A8%88%EF%BC%92%E3%83%80%E3%83%9F%E3%83%BC%E5%88%97%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%82%BB%E3%82%AB%E3%83%B3%E3%83%80%E3%83%AA%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92%E8%B2%BC%E3%82%8B%E6%A1%88
